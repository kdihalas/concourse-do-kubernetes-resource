{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Concourse Resource for Digitalocean Kubernetes","text":"<p>Create, update and delete Digitalocean Kubernetes Clusters.</p>"},{"location":"#installing","title":"Installing","text":"<p>Use this resource by adding the following to the <code>resource_types</code> section of your pipeline config:</p> <pre><code>---\nresource_types:\n- name: kubernetes-resource\ntype: docker-image\nsource:\nrepository: kdihalas/digitalocean-kubernetes-resource:v2\n</code></pre> <p>See concourse docs for more details on adding <code>resource_types</code> to a pipeline config.</p>"},{"location":"#configuration-check","title":"Configuration (Check)","text":"<p>Check communicates with the Digitalocean API to make sure that your configuration is correct.</p> <pre><code>---\nresources:\n- name: cluster\ntype: kubernetes-resource\nsource:\ntoken: 17365b6cf3b3586b6a....\nregion: lon1\ntags:\n- ci\nnode_pools:\n- name: worker-pool\nsize: \"s-1vcpu-2gb\"\ncount: 1\ntags:\n- worker\n</code></pre> <p>Options</p> Option Required Description token Digitalocean token with read/write access. You can read how to create one here. region Set the region in which you want to deploy the kubernetes cluster. tags A list of tags for the cluster. skip Used only in get_params under Put node_pools A list with the node pools you want to deploy for your cluster. <p>Node Pools options</p> Option Required Description name Name of the node pool size Size of the nodes in the node pool count How many nodes will be in the pool tags A list of tags for the nodes in the node pool"},{"location":"#get-in","title":"Get (In)","text":"<p>Provision a new cluster in Digitalocean and save the <code>cluster ID</code> and the cluster <code>kubeconfig</code> under the resource directory.</p> <p>Generated artifacts:</p> <ul> <li>cluster/cluster_id</li> <li>cluster/kubeconfig</li> </ul> <pre><code>---\nresources:\n- name: cluster\ntype: kubernetes-resource\nsource:\ntoken: 17365b6cf3b3586b6a....\nregion: lon1\ntags:\n- ci\nnode_pools:\n- name: worker-pool\nsize: \"s-1vcpu-2gb\"\ncount: 1\ntags:\n- worker\njobs:\n- name: create-cluster\nplan:\n- get: cluster\nparams:\nname: cluster1\nversion: 1.13.1-do.2\n</code></pre> <p>Params:</p> Option Required Description name Name of the cluster version Version Slug of kubernetes cluster to deploy,"},{"location":"#put-out","title":"Put (Out)","text":"<p>Update or delete a kubernetes cluster. Needs to be run after Get since it depends in some artifacts generated by it.</p>"},{"location":"#delete","title":"Delete","text":"<pre><code>---\nresources:\n- name: cluster\ntype: kubernetes-resource\nsource:\ntoken: 17365b6cf3b3586b6a....\nregion: lon1\ntags:\n- ci\nnode_pools:\n- name: worker-pool\nsize: \"s-1vcpu-2gb\"\ncount: 1\ntags:\n- worker\njobs:\n- name: delete-cluster\nplan:\n- put: cluster\nparams:\nname: cluster1\ndelete: true\nget_params:\nname: cluster1\nskip: true\n</code></pre> <p>Params:</p> Option Required Description name Name of the cluster delete If delete is true then the cluster will be deleted"},{"location":"#update","title":"Update","text":"<pre><code>---\nresources:\n- name: cluster\ntype: kubernetes-resource\nsource:\ntoken: 17365b6cf3b3586b6a....\nregion: lon1\ntags:\n- ci\nnode_pools:\n- name: worker-pool\nsize: \"s-1vcpu-2gb\"\ncount: 1\ntags:\n- worker\njobs:\n- name: scale-cluster\nplan:\n- put: cluster\nparams:\nname: cluster1\nnode_pools:\n- name: worker-pool\ncount: 3\nget_params:\nname: cluster1\nskip: true\n</code></pre> <p>Params:</p> Option Required Description name Name of the cluster node_pools A list with the node pools you want to update <p>Node Pools options</p> Option Required Description name Name of the node pool count How many nodes will be in the pool"},{"location":"#container-verification","title":"Container Verification","text":"<p>To verify the container signature you will need to install cosign and run </p> <pre><code>COSIGN_EXPERIMENTAL=1 cosign verify kdihalas/digitalocean-kubernetes-resource:v2\n</code></pre>"}]}